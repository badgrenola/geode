var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function r(t){t.forEach(e)}function o(t){return"function"==typeof t}function l(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function a(t,e){t.appendChild(e)}function i(t,e,n){t.insertBefore(e,n||null)}function c(t){t.parentNode.removeChild(t)}function u(t){return document.createElement(t)}function s(t){return document.createTextNode(t)}function f(){return s(" ")}function d(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function p(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function g(t,e){e=""+e,t.data!==e&&(t.data=e)}let m;function h(t){m=t}const x=[],$=[],y=[],b=[],v=Promise.resolve();let w=!1;function _(t){y.push(t)}let E=!1;const k=new Set;function F(){if(!E){E=!0;do{for(let t=0;t<x.length;t+=1){const e=x[t];h(e),C(e.$$)}for(x.length=0;$.length;)$.pop()();for(let t=0;t<y.length;t+=1){const e=y[t];k.has(e)||(k.add(e),e())}y.length=0}while(x.length);for(;b.length;)b.pop()();w=!1,E=!1,k.clear()}}function C(t){if(null!==t.fragment){t.update(),r(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(_)}}const L=new Set;function T(t,e){t&&t.i&&(L.delete(t),t.i(e))}function A(t,n,l){const{fragment:a,on_mount:i,on_destroy:c,after_update:u}=t.$$;a&&a.m(n,l),_(()=>{const n=i.map(e).filter(o);c?c.push(...n):r(n),t.$$.on_mount=[]}),u.forEach(_)}function j(t,e){const n=t.$$;null!==n.fragment&&(r(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function D(t,e){-1===t.$$.dirty[0]&&(x.push(t),w||(w=!0,v.then(F)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function I(e,o,l,a,i,u,s=[-1]){const f=m;h(e);const d=o.props||{},p=e.$$={fragment:null,ctx:null,props:u,update:t,not_equal:i,bound:n(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(f?f.$$.context:[]),callbacks:n(),dirty:s};let g=!1;if(p.ctx=l?l(e,d,(t,n,...r)=>{const o=r.length?r[0]:n;return p.ctx&&i(p.ctx[t],p.ctx[t]=o)&&(p.bound[t]&&p.bound[t](o),g&&D(e,t)),n}):[],p.update(),g=!0,r(p.before_update),p.fragment=!!a&&a(p.ctx),o.target){if(o.hydrate){const t=function(t){return Array.from(t.childNodes)}(o.target);p.fragment&&p.fragment.l(t),t.forEach(c)}else p.fragment&&p.fragment.c();o.intro&&T(e.$$.fragment),A(e,o.target,o.anchor),F()}h(f)}class N{$destroy(){j(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(){}}var M=new FileReader;function B(e){let n;return{c(){n=u("p"),n.textContent="Drag a file here or click to browse"},m(t,e){i(t,n,e)},p:t,d(t){t&&c(n)}}}function G(t){let e,n;return{c(){e=u("p"),n=s(t[2])},m(t,r){i(t,e,r),a(e,n)},p(t,e){4&e&&g(n,t[2])},d(t){t&&c(e)}}}function O(t){let e,n,r,o,l,d,m,h=t[1].name+"";return{c(){e=u("div"),n=u("p"),r=s("Current file is : "),o=u("i"),l=s(h),d=f(),m=u("p"),m.textContent="Drag another file here or click to browse",p(n,"class","text-center"),p(m,"class","text-center mt-4")},m(t,c){i(t,e,c),a(e,n),a(n,r),a(n,o),a(o,l),a(e,d),a(e,m)},p(t,e){2&e&&h!==(h=t[1].name+"")&&g(l,h)},d(t){t&&c(e)}}}function P(e){let n;return{c(){n=u("p"),n.textContent="Let go to try and read the file!"},m(t,e){i(t,n,e)},p:t,d(t){t&&c(n)}}}function S(e){let n,o,l,s,g,m;function h(t,e){return t[0]?P:t[1]?O:t[2]?G:B}let x=h(e),$=x(e);return{c(){n=u("div"),o=u("input"),l=f(),s=u("div"),g=u("div"),$.c(),p(o,"id","hiddenFileInput"),p(o,"type","file"),p(o,"class","hidden"),p(o,"accept","image/tiff"),p(g,"class","h-full flex flex-col justify-center items-center text-gray-600 font-light text-sm sm:text-base"),p(s,"class",e[3]),p(n,"class","w-full h-full")},m(t,c,u){i(t,n,c),a(n,o),a(n,l),a(n,s),a(s,g),$.m(g,null),u&&r(m),m=[d(o,"change",e[4]),d(s,"dragenter",e[5]),d(s,"dragover",e[6]),d(s,"dragleave",e[7]),d(s,"drop",e[8]),d(s,"click",e[9])]},p(t,[e]){x===(x=h(t))&&$?$.p(t,e):($.d(1),$=x(t),$&&($.c(),$.m(g,null))),8&e&&p(s,"class",t[3])},i:t,o:t,d(t){t&&c(n),$.d(),r(m)}}}function q(t,e,n){let r=!1,o=null,l=null;const a=t=>{t.preventDefault(),t.stopPropagation()},i=t=>{M.readAsText(t)};let c=null;return t.$$.update=()=>{15&t.$$.dirty&&(n(3,c="w-full h-full bg-gray-200 rounded-lg cursor-pointer"),l?n(3,c+=" border-dashed border-4 border-red-500"):r?n(3,c+=" border-dashed border-4 border-green-500"):o&&n(3,c+=" border-4 border-green-400"))},[r,o,l,c,t=>{t.preventDefault(),n(2,l=null),t.target.files.length&&n(1,o=t.target.files[0])},t=>{a(t),n(0,r=!0),n(2,l=null)},t=>{a(t),n(0,r=!0)},t=>{a(t),n(0,r=!1)},t=>{a(t),n(0,r=!1),"image/tiff"==t.dataTransfer.files[0].type?(n(1,o=t.dataTransfer.files[0]),i(o)):(n(2,l="File was not a tiff :("),n(1,o=null))},t=>{document.getElementById("hiddenFileInput").click()}]}M.addEventListener("loadstart",(function(){console.log("File reading started")})),M.addEventListener("load",(function(t){t.target.result;console.log("Finished loading the whole file very inefficiently")})),M.addEventListener("error",(function(){alert("Error : Failed to read file")})),M.addEventListener("progress",(function(t){if(1==t.lengthComputable){var e=Math.floor(t.loaded/t.total*100);console.log(e+"% read")}}));class H extends N{constructor(t){super(),I(this,t,q,S,l,{})}}function R(e){let n,r,o,l,s,d,g,m;const h=new H({});return{c(){var t;n=u("main"),r=u("div"),o=u("div"),o.innerHTML='<h1 id="geodeTitle" class="text-green-500 text-4xl tracking-superwide -mr-4 sm:text-5xl sm:tracking-superwider sm:-mr-8 ">Geode</h1> \n\t\t\t<h2 class="text-gray-600 font-light -mt-1 sm:text-l sm:-mt-2">A really very helpful GeoTIFF previewer</h2>',l=f(),s=u("div"),(t=h.$$.fragment)&&t.c(),d=f(),g=u("p"),g.textContent="No information on your files is uploaded, and all processing happens on your own machine.",p(o,"class","flex flex-col justify-center items-center pt-8"),p(s,"class","w-full flex-1 p-8"),p(g,"class","w-full text-center px-8 pb-8 text-sm text-gray-500"),p(r,"class","container mx-auto flex flex-col h-full"),p(n,"class","w-full h-full")},m(t,e){i(t,n,e),a(n,r),a(r,o),a(r,l),a(r,s),A(h,s,null),a(r,d),a(r,g),m=!0},p:t,i(t){m||(T(h.$$.fragment,t),m=!0)},o(t){!function(t,e,n,r){if(t&&t.o){if(L.has(t))return;L.add(t),(void 0).c.push(()=>{L.delete(t),r&&(n&&t.d(1),r())}),t.o(e)}}(h.$$.fragment,t),m=!1},d(t){t&&c(n),j(h)}}}return new class extends N{constructor(t){super(),I(this,t,null,R,l,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
