var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function r(t){t.forEach(e)}function o(t){return"function"==typeof t}function l(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function a(t,e){t.appendChild(e)}function i(t,e,n){t.insertBefore(e,n||null)}function c(t){t.parentNode.removeChild(t)}function s(t){return document.createElement(t)}function u(t){return document.createTextNode(t)}function f(){return u(" ")}function d(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function p(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function g(t,e){e=""+e,t.data!==e&&(t.data=e)}let m;function h(t){m=t}const x=[],$=[],y=[],v=[],b=Promise.resolve();let w=!1;function _(t){y.push(t)}let E=!1;const k=new Set;function C(){if(!E){E=!0;do{for(let t=0;t<x.length;t+=1){const e=x[t];h(e),F(e.$$)}for(x.length=0;$.length;)$.pop()();for(let t=0;t<y.length;t+=1){const e=y[t];k.has(e)||(k.add(e),e())}y.length=0}while(x.length);for(;v.length;)v.pop()();w=!1,E=!1,k.clear()}}function F(t){if(null!==t.fragment){t.update(),r(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(_)}}const T=new Set;function L(t,e){t&&t.i&&(T.delete(t),t.i(e))}function A(t,n,l){const{fragment:a,on_mount:i,on_destroy:c,after_update:s}=t.$$;a&&a.m(n,l),_(()=>{const n=i.map(e).filter(o);c?c.push(...n):r(n),t.$$.on_mount=[]}),s.forEach(_)}function M(t,e){const n=t.$$;null!==n.fragment&&(r(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function j(t,e){-1===t.$$.dirty[0]&&(x.push(t),w||(w=!0,b.then(C)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function D(e,o,l,a,i,s,u=[-1]){const f=m;h(e);const d=o.props||{},p=e.$$={fragment:null,ctx:null,props:s,update:t,not_equal:i,bound:n(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(f?f.$$.context:[]),callbacks:n(),dirty:u};let g=!1;if(p.ctx=l?l(e,d,(t,n,...r)=>{const o=r.length?r[0]:n;return p.ctx&&i(p.ctx[t],p.ctx[t]=o)&&(p.bound[t]&&p.bound[t](o),g&&j(e,t)),n}):[],p.update(),g=!0,r(p.before_update),p.fragment=!!a&&a(p.ctx),o.target){if(o.hydrate){const t=function(t){return Array.from(t.childNodes)}(o.target);p.fragment&&p.fragment.l(t),t.forEach(c)}else p.fragment&&p.fragment.c();o.intro&&L(e.$$.fragment),A(e,o.target,o.anchor),C()}h(f)}class I{$destroy(){M(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(){}}var N=new FileReader;function P(e){let n;return{c(){n=s("span"),n.textContent="Drag a file here or click to browse"},m(t,e){i(t,n,e)},p:t,d(t){t&&c(n)}}}function B(e){let n;return{c(){n=s("span"),n.textContent="Click here to browse for a file on your device"},m(t,e){i(t,n,e)},p:t,d(t){t&&c(n)}}}function G(t){let e,n;return{c(){e=s("span"),n=u(t[2])},m(t,r){i(t,e,r),a(e,n)},p(t,e){4&e&&g(n,t[2])},d(t){t&&c(e)}}}function O(t){let e,n,r,o,l,d,m=t[1].name+"";return{c(){e=s("span"),n=u("Current file is : "),r=s("i"),o=u(m),l=f(),d=s("span"),d.textContent="Drag another file here or click to browse",p(d,"class"," mt-4")},m(t,c){i(t,e,c),a(e,n),a(e,r),a(r,o),i(t,l,c),i(t,d,c)},p(t,e){2&e&&m!==(m=t[1].name+"")&&g(o,m)},d(t){t&&c(e),t&&c(l),t&&c(d)}}}function S(e){let n;return{c(){n=s("span"),n.textContent="Let go to try and read the file!"},m(t,e){i(t,n,e)},p:t,d(t){t&&c(n)}}}function q(e){let n,o,l,u,g,m,h;function x(t,e){return t[0]?S:t[1]?O:t[2]?G:t[4]?B:P}let $=x(e),y=$(e);return{c(){n=s("div"),o=s("input"),l=f(),u=s("div"),g=s("div"),m=s("div"),y.c(),p(o,"id","hiddenFileInput"),p(o,"type","file"),p(o,"class","hidden"),p(o,"accept","image/tiff"),p(m,"class","p-4 text-center"),p(g,"class","h-full flex flex-col justify-center items-center text-gray-600 font-light text-sm sm:text-base"),p(u,"class",e[3]),p(n,"class","w-full h-full")},m(t,c,s){i(t,n,c),a(n,o),a(n,l),a(n,u),a(u,g),a(g,m),y.m(m,null),s&&r(h),h=[d(o,"change",e[5]),d(u,"dragenter",e[6]),d(u,"dragover",e[7]),d(u,"dragleave",e[8]),d(u,"drop",e[9]),d(u,"click",e[10])]},p(t,[e]){$===($=x(t))&&y?y.p(t,e):(y.d(1),y=$(t),y&&(y.c(),y.m(m,null))),8&e&&p(u,"class",t[3])},i:t,o:t,d(t){t&&c(n),y.d(),r(h)}}}function H(t,e,n){let r=!1,o=null,l=null,a="ontouchstart"in window||navigator.MaxTouchPoints>0||navigator.msMaxTouchPoints>0;const i=t=>{t.preventDefault(),t.stopPropagation()},c=t=>{N.readAsText(t)};let s=null;return t.$$.update=()=>{15&t.$$.dirty&&(n(3,s="w-full h-full bg-gray-200 rounded-lg cursor-pointer"),l?n(3,s+=" border-dashed border-4 border-red-500"):r?n(3,s+=" border-dashed border-4 border-green-500"):o&&n(3,s+=" border-4 border-green-400"))},[r,o,l,s,a,t=>{t.preventDefault(),n(2,l=null),t.target.files.length&&n(1,o=t.target.files[0])},t=>{i(t),n(0,r=!0),n(2,l=null)},t=>{i(t),n(0,r=!0)},t=>{i(t),n(0,r=!1)},t=>{i(t),n(0,r=!1),"image/tiff"==t.dataTransfer.files[0].type?(n(1,o=t.dataTransfer.files[0]),c(o)):(n(2,l="File was not a tiff :("),n(1,o=null))},t=>{document.getElementById("hiddenFileInput").click()}]}N.addEventListener("loadstart",(function(){console.log("File reading started")})),N.addEventListener("load",(function(t){t.target.result;console.log("Finished loading the whole file very inefficiently")})),N.addEventListener("error",(function(){alert("Error : Failed to read file")})),N.addEventListener("progress",(function(t){if(1==t.lengthComputable){var e=Math.floor(t.loaded/t.total*100);console.log(e+"% read")}}));class R extends I{constructor(t){super(),D(this,t,H,q,l,{})}}function z(e){let n,r,o,l,u,d,g,m;const h=new R({});return{c(){var t;n=s("main"),r=s("div"),o=s("div"),o.innerHTML='<h1 id="geodeTitle" class="text-green-500 text-4xl tracking-superwide -mr-4 sm:text-5xl sm:tracking-superwider sm:-mr-8 ">Geode</h1> \n\t\t\t<h2 class="text-center text-gray-600 font-light -mt-1 sm:text-l sm:-mt-2">A really very helpful GeoTIFF previewer</h2>',l=f(),u=s("div"),(t=h.$$.fragment)&&t.c(),d=f(),g=s("p"),g.textContent="No information on your files is uploaded, and all processing happens on your own machine.",p(o,"class","flex flex-col justify-center items-center pt-8"),p(u,"class","w-full flex-1 p-8"),p(g,"class","w-full text-center px-8 pb-8 text-sm text-gray-500"),p(r,"class","container mx-auto flex flex-col h-full"),p(n,"class","w-full h-full")},m(t,e){i(t,n,e),a(n,r),a(r,o),a(r,l),a(r,u),A(h,u,null),a(r,d),a(r,g),m=!0},p:t,i(t){m||(L(h.$$.fragment,t),m=!0)},o(t){!function(t,e,n,r){if(t&&t.o){if(T.has(t))return;T.add(t),(void 0).c.push(()=>{T.delete(t),r&&(n&&t.d(1),r())}),t.o(e)}}(h.$$.fragment,t),m=!1},d(t){t&&c(n),M(h)}}}return new class extends I{constructor(t){super(),D(this,t,null,z,l,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
