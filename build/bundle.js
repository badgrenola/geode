var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function r(t){t.forEach(e)}function o(t){return"function"==typeof t}function l(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function i(t,e){t.appendChild(e)}function c(t,e,n){t.insertBefore(e,n||null)}function a(t){t.parentNode.removeChild(t)}function s(t){return document.createElement(t)}function u(t){return document.createTextNode(t)}function f(){return u(" ")}function d(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function p(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function m(t,e){e=""+e,t.data!==e&&(t.data=e)}let g;function h(t){g=t}const x=[],$=[],y=[],b=[],v=Promise.resolve();let w=!1;function k(t){y.push(t)}let _=!1;const C=new Set;function D(){if(!_){_=!0;do{for(let t=0;t<x.length;t+=1){const e=x[t];h(e),F(e.$$)}for(x.length=0;$.length;)$.pop()();for(let t=0;t<y.length;t+=1){const e=y[t];C.has(e)||(C.add(e),e())}y.length=0}while(x.length);for(;b.length;)b.pop()();w=!1,_=!1,C.clear()}}function F(t){if(null!==t.fragment){t.update(),r(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(k)}}const E=new Set;function T(t,e){t&&t.i&&(E.delete(t),t.i(e))}function j(t,n,l){const{fragment:i,on_mount:c,on_destroy:a,after_update:s}=t.$$;i&&i.m(n,l),k(()=>{const n=c.map(e).filter(o);a?a.push(...n):r(n),t.$$.on_mount=[]}),s.forEach(k)}function S(t,e){const n=t.$$;null!==n.fragment&&(r(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function A(t,e){-1===t.$$.dirty[0]&&(x.push(t),w||(w=!0,v.then(D)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function I(e,o,l,i,c,s,u=[-1]){const f=g;h(e);const d=o.props||{},p=e.$$={fragment:null,ctx:null,props:s,update:t,not_equal:c,bound:n(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(f?f.$$.context:[]),callbacks:n(),dirty:u};let m=!1;if(p.ctx=l?l(e,d,(t,n,...r)=>{const o=r.length?r[0]:n;return p.ctx&&c(p.ctx[t],p.ctx[t]=o)&&(p.bound[t]&&p.bound[t](o),m&&A(e,t)),n}):[],p.update(),m=!0,r(p.before_update),p.fragment=!!i&&i(p.ctx),o.target){if(o.hydrate){const t=function(t){return Array.from(t.childNodes)}(o.target);p.fragment&&p.fragment.l(t),t.forEach(a)}else p.fragment&&p.fragment.c();o.intro&&T(e.$$.fragment),j(e,o.target,o.anchor),D()}h(f)}class L{$destroy(){S(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(){}}function M(e){let n;return{c(){n=s("p"),n.textContent="Drag a file here or click to browse"},m(t,e){c(t,n,e)},p:t,d(t){t&&a(n)}}}function P(e){let n;return{c(){n=s("p"),n.textContent="Click here to browse for a file on your device"},m(t,e){c(t,n,e)},p:t,d(t){t&&a(n)}}}function N(t){let e,n;return{c(){e=s("p"),n=u(t[3])},m(t,r){c(t,e,r),i(e,n)},p(t,e){8&e&&m(n,t[3])},d(t){t&&a(e)}}}function W(t){let e,n,r,o,l,d,g,h,x,$,y=t[2].name+"",b=t[0].join(", ")+"";let v=function(t,e){return t[6]?q:O}(t)(t);return{c(){e=s("p"),n=u("Current file is : "),r=s("i"),o=u(y),l=f(),d=s("p"),g=u("It contains the following fields : "),h=u(b),x=f(),v.c(),$=u(""),p(d,"class","mt-4")},m(t,a){c(t,e,a),i(e,n),i(e,r),i(r,o),c(t,l,a),c(t,d,a),i(d,g),i(d,h),c(t,x,a),v.m(t,a),c(t,$,a)},p(t,e){4&e&&y!==(y=t[2].name+"")&&m(o,y),1&e&&b!==(b=t[0].join(", ")+"")&&m(h,b)},d(t){t&&a(e),t&&a(l),t&&a(d),t&&a(x),v.d(t),t&&a($)}}}function B(e){let n;return{c(){n=s("p"),n.textContent="Let go to try and read the file!"},m(t,e){c(t,n,e)},p:t,d(t){t&&a(n)}}}function G(e){let n;return{c(){n=s("p"),n.textContent="Loading..."},m(t,e){c(t,n,e)},p:t,d(t){t&&a(n)}}}function O(t){let e;return{c(){e=s("p"),e.textContent="Drag another file here or click to browse",p(e,"class","mt-4")},m(t,n){c(t,e,n)},d(t){t&&a(e)}}}function q(t){let e;return{c(){e=s("p"),e.textContent="Click her to browse for another file on your device",p(e,"class","mt-4")},m(t,n){c(t,e,n)},d(t){t&&a(e)}}}function H(e){let n,o,l,u,m,g,h;function x(t,e){return t[4]?G:t[1]?B:t[2]?W:t[3]?N:t[6]?P:M}let $=x(e),y=$(e);return{c(){var t,r,i;n=s("div"),o=s("input"),l=f(),u=s("div"),m=s("div"),g=s("div"),y.c(),p(o,"id","hiddenFileInput"),p(o,"type","file"),p(o,"class","hidden"),p(o,"accept",z),p(g,"class","p-4 text-center"),t="word-break",r="break-word",g.style.setProperty(t,r,i?"important":""),p(m,"class","h-full flex flex-col justify-center items-center text-gray-600 font-light text-sm sm:text-base overflow-hidden"),p(u,"class",e[5]),p(n,"class","w-full h-full")},m(t,a,s){c(t,n,a),i(n,o),i(n,l),i(n,u),i(u,m),i(m,g),y.m(g,null),s&&r(h),h=[d(o,"change",e[7]),d(u,"dragenter",e[8]),d(u,"dragover",e[9]),d(u,"dragleave",e[10]),d(u,"drop",e[11]),d(u,"click",e[12])]},p(t,[e]){$===($=x(t))&&y?y.p(t,e):(y.d(1),y=$(t),y&&(y.c(),y.m(g,null))),32&e&&p(u,"class",t[5])},i:t,o:t,d(t){t&&a(n),y.d(),r(h)}}}let z="image/tiff";function J(t,e,n){let{onFileSelected:r=null}=e,{fileDetails:o=null}=e,l=!1,i=null,c=null,a=!1,s="ontouchstart"in window||navigator.MaxTouchPoints>0||navigator.msMaxTouchPoints>0;const u=t=>{t.preventDefault(),t.stopPropagation()},f=t=>{n(4,a=!0),r&&r(t)};let d=null;return t.$set=t=>{"onFileSelected"in t&&n(13,r=t.onFileSelected),"fileDetails"in t&&n(0,o=t.fileDetails)},t.$$.update=()=>{1&t.$$.dirty&&o&&n(4,a=!1),46&t.$$.dirty&&(n(5,d="w-full h-full bg-gray-200 rounded-lg cursor-pointer"),c?n(5,d+=" border-dashed border-4 border-red-500"):l?n(5,d+=" border-dashed border-4 border-green-500"):i&&n(5,d+=" border-4 border-green-400"))},[o,l,i,c,a,d,s,t=>{t.preventDefault(),n(3,c=null),t.target.files.length&&(n(2,i=t.target.files[0]),f(i))},t=>{u(t),a||(n(1,l=!0),n(3,c=null))},t=>{u(t),a||n(1,l=!0)},t=>{u(t),a||n(1,l=!1)},t=>{u(t),a||(n(1,l=!1),t.dataTransfer.files[0].type==z?(n(2,i=t.dataTransfer.files[0]),f(i)):(n(3,c="File was not a tiff :("),n(2,i=null)))},t=>{document.getElementById("hiddenFileInput").click()},r]}class K extends L{constructor(t){super(),I(this,t,J,H,l,{onFileSelected:13,fileDetails:0})}}function Q(t){let e,n,r,o,l,u,d,m;const g=new K({props:{onFileSelected:t[1],fileDetails:t[0]}});return{c(){var t;e=s("main"),n=s("div"),r=s("div"),r.innerHTML='<h1 id="geodeTitle" class="text-green-500 text-4xl tracking-superwide -mr-4 sm:text-5xl sm:tracking-superwider sm:-mr-8 ">Geode</h1> \n\t\t\t<h2 class="text-center text-gray-600 font-light -mt-1 sm:text-l sm:-mt-2">A (soon-to-be) really very helpful GeoTIFF previewer</h2>',o=f(),l=s("div"),(t=g.$$.fragment)&&t.c(),u=f(),d=s("p"),d.textContent="No information on your files is uploaded, and all processing happens on your own machine.",p(r,"class","flex flex-col justify-center items-center pt-8"),p(l,"class","w-full flex-1 p-8 overflow-hidden"),p(d,"class","w-full text-center px-8 pb-8 text-sm text-gray-500"),p(n,"class","container mx-auto flex flex-col h-full"),p(e,"class","w-full h-full")},m(t,a){c(t,e,a),i(e,n),i(n,r),i(n,o),i(n,l),j(g,l,null),i(n,u),i(n,d),m=!0},p(t,[e]){const n={};1&e&&(n.fileDetails=t[0]),g.$set(n)},i(t){m||(T(g.$$.fragment,t),m=!0)},o(t){!function(t,e,n,r){if(t&&t.o){if(E.has(t))return;E.add(t),(void 0).c.push(()=>{E.delete(t),r&&(n&&t.d(1),r())}),t.o(e)}}(g.$$.fragment,t),m=!1},d(t){t&&a(e),S(g)}}}function R(t,e,n){let r=null,o=new Worker("./worker/geodeWW.js");o.onmessage=function(t){n(0,r=t.data)};return[r,t=>{o.postMessage(t),n(0,r=null)}]}return new class extends L{constructor(t){super(),I(this,t,R,Q,l,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
