var app=function(){"use strict";function e(){}function t(e){return e()}function n(){return Object.create(null)}function r(e){e.forEach(t)}function o(e){return"function"==typeof e}function l(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function i(e,t){e.appendChild(t)}function c(e,t,n){e.insertBefore(t,n||null)}function a(e){e.parentNode.removeChild(e)}function u(e){return document.createElement(e)}function s(e){return document.createTextNode(e)}function f(){return s(" ")}function d(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function p(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function m(e,t){t=""+t,e.data!==t&&(e.data=t)}let g;function h(e){g=e}const x=[],$=[],y=[],b=[],v=Promise.resolve();let w=!1;function k(e){y.push(e)}let _=!1;const C=new Set;function D(){if(!_){_=!0;do{for(let e=0;e<x.length;e+=1){const t=x[e];h(t),F(t.$$)}for(x.length=0;$.length;)$.pop()();for(let e=0;e<y.length;e+=1){const t=y[e];C.has(t)||(C.add(t),t())}y.length=0}while(x.length);for(;b.length;)b.pop()();w=!1,_=!1,C.clear()}}function F(e){if(null!==e.fragment){e.update(),r(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(k)}}const E=new Set;function T(e,t){e&&e.i&&(E.delete(e),e.i(t))}function S(e,n,l){const{fragment:i,on_mount:c,on_destroy:a,after_update:u}=e.$$;i&&i.m(n,l),k(()=>{const n=c.map(t).filter(o);a?a.push(...n):r(n),e.$$.on_mount=[]}),u.forEach(k)}function j(e,t){const n=e.$$;null!==n.fragment&&(r(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function A(e,t){-1===e.$$.dirty[0]&&(x.push(e),w||(w=!0,v.then(D)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function L(t,o,l,i,c,u,s=[-1]){const f=g;h(t);const d=o.props||{},p=t.$$={fragment:null,ctx:null,props:u,update:e,not_equal:c,bound:n(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(f?f.$$.context:[]),callbacks:n(),dirty:s};let m=!1;if(p.ctx=l?l(t,d,(e,n,...r)=>{const o=r.length?r[0]:n;return p.ctx&&c(p.ctx[e],p.ctx[e]=o)&&(p.bound[e]&&p.bound[e](o),m&&A(t,e)),n}):[],p.update(),m=!0,r(p.before_update),p.fragment=!!i&&i(p.ctx),o.target){if(o.hydrate){const e=function(e){return Array.from(e.childNodes)}(o.target);p.fragment&&p.fragment.l(e),e.forEach(a)}else p.fragment&&p.fragment.c();o.intro&&T(t.$$.fragment),S(t,o.target,o.anchor),D()}h(f)}class M{$destroy(){j(this,1),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(){}}function P(t){let n;return{c(){n=u("p"),n.textContent="Drag a file here or click to browse"},m(e,t){c(e,n,t)},p:e,d(e){e&&a(n)}}}function I(t){let n;return{c(){n=u("p"),n.textContent="Click here to browse for a file on your device"},m(e,t){c(e,n,t)},p:e,d(e){e&&a(n)}}}function N(e){let t,n;return{c(){t=u("p"),n=s(e[3])},m(e,r){c(e,t,r),i(t,n)},p(e,t){8&t&&m(n,e[3])},d(e){e&&a(t)}}}function W(e){let t,n,r,o,l,d,g,h,x,$=e[2].name+"";let y=function(e,t){return e[6]?q:O}(e)(e);return{c(){t=u("p"),n=s("Current file is : "),r=u("i"),o=s($),l=f(),d=u("p"),g=s(e[0]),h=f(),y.c(),x=s(""),p(d,"class","mt-4")},m(e,a){c(e,t,a),i(t,n),i(t,r),i(r,o),c(e,l,a),c(e,d,a),i(d,g),c(e,h,a),y.m(e,a),c(e,x,a)},p(e,t){4&t&&$!==($=e[2].name+"")&&m(o,$),1&t&&m(g,e[0])},d(e){e&&a(t),e&&a(l),e&&a(d),e&&a(h),y.d(e),e&&a(x)}}}function B(t){let n;return{c(){n=u("p"),n.textContent="Let go to try and read the file!"},m(e,t){c(e,n,t)},p:e,d(e){e&&a(n)}}}function G(t){let n;return{c(){n=u("p"),n.textContent="Loading..."},m(e,t){c(e,n,t)},p:e,d(e){e&&a(n)}}}function O(e){let t;return{c(){t=u("p"),t.textContent="Drag another file here or click to browse",p(t,"class","mt-4")},m(e,n){c(e,t,n)},d(e){e&&a(t)}}}function q(e){let t;return{c(){t=u("p"),t.textContent="Click her to browse for another file on your device",p(t,"class","mt-4")},m(e,n){c(e,t,n)},d(e){e&&a(t)}}}function H(t){let n,o,l,s,m,g,h;function x(e,t){return e[4]?G:e[1]?B:e[2]?W:e[3]?N:e[6]?I:P}let $=x(t),y=$(t);return{c(){var e,r,i;n=u("div"),o=u("input"),l=f(),s=u("div"),m=u("div"),g=u("div"),y.c(),p(o,"id","hiddenFileInput"),p(o,"type","file"),p(o,"class","hidden"),p(o,"accept",z),p(g,"class","p-4 text-center"),e="word-break",r="break-word",g.style.setProperty(e,r,i?"important":""),p(m,"class","h-full flex flex-col justify-center items-center text-gray-600 font-light text-sm sm:text-base overflow-hidden"),p(s,"class",t[5]),p(n,"class","w-full h-full")},m(e,a,u){c(e,n,a),i(n,o),i(n,l),i(n,s),i(s,m),i(m,g),y.m(g,null),u&&r(h),h=[d(o,"change",t[7]),d(s,"dragenter",t[8]),d(s,"dragover",t[9]),d(s,"dragleave",t[10]),d(s,"drop",t[11]),d(s,"click",t[12])]},p(e,[t]){$===($=x(e))&&y?y.p(e,t):(y.d(1),y=$(e),y&&(y.c(),y.m(g,null))),32&t&&p(s,"class",e[5])},i:e,o:e,d(e){e&&a(n),y.d(),r(h)}}}let z="image/tiff";function J(e,t,n){let{onFileSelected:r=null}=t,{fileDetails:o=null}=t,l=!1,i=null,c=null,a=!1,u="ontouchstart"in window||navigator.MaxTouchPoints>0||navigator.msMaxTouchPoints>0;const s=e=>{e.preventDefault(),e.stopPropagation()},f=e=>{n(4,a=!0),r&&r(e)};let d=null;return e.$set=e=>{"onFileSelected"in e&&n(13,r=e.onFileSelected),"fileDetails"in e&&n(0,o=e.fileDetails)},e.$$.update=()=>{1&e.$$.dirty&&o&&n(4,a=!1),46&e.$$.dirty&&(n(5,d="w-full h-full bg-gray-200 rounded-lg cursor-pointer"),c?n(5,d+=" border-dashed border-4 border-red-500"):l?n(5,d+=" border-dashed border-4 border-green-500"):i&&n(5,d+=" border-4 border-green-400"))},[o,l,i,c,a,d,u,e=>{e.preventDefault(),n(3,c=null),e.target.files.length&&(n(2,i=e.target.files[0]),f(i))},e=>{s(e),a||(n(1,l=!0),n(3,c=null))},e=>{s(e),a||n(1,l=!0)},e=>{s(e),a||n(1,l=!1)},e=>{s(e),a||(n(1,l=!1),e.dataTransfer.files[0].type==z?(n(2,i=e.dataTransfer.files[0]),f(i)):(n(3,c="File was not a tiff :("),n(2,i=null)))},e=>{document.getElementById("hiddenFileInput").click()},r]}class K extends M{constructor(e){super(),L(this,e,J,H,l,{onFileSelected:13,fileDetails:0})}}function Q(e){let t,n,r,o,l,s,d,m;const g=new K({props:{onFileSelected:e[1],fileDetails:e[0]}});return{c(){var e;t=u("main"),n=u("div"),r=u("div"),r.innerHTML='<h1 id="geodeTitle" class="text-green-500 text-4xl tracking-superwide -mr-4 sm:text-5xl sm:tracking-superwider sm:-mr-8 ">Geode</h1> \n\t\t\t<h2 class="text-center text-gray-600 font-light -mt-1 sm:text-l sm:-mt-2">A (soon-to-be) really very helpful GeoTIFF previewer</h2>',o=f(),l=u("div"),(e=g.$$.fragment)&&e.c(),s=f(),d=u("p"),d.textContent="No information on your files is uploaded, and all processing happens on your own machine.",p(r,"class","flex flex-col justify-center items-center pt-8"),p(l,"class","w-full flex-1 p-8 overflow-hidden"),p(d,"class","w-full text-center px-8 pb-8 text-sm text-gray-500"),p(n,"class","container mx-auto flex flex-col h-full"),p(t,"class","w-full h-full")},m(e,a){c(e,t,a),i(t,n),i(n,r),i(n,o),i(n,l),S(g,l,null),i(n,s),i(n,d),m=!0},p(e,[t]){const n={};1&t&&(n.fileDetails=e[0]),g.$set(n)},i(e){m||(T(g.$$.fragment,e),m=!0)},o(e){!function(e,t,n,r){if(e&&e.o){if(E.has(e))return;E.add(e),(void 0).c.push(()=>{E.delete(e),r&&(n&&e.d(1),r())}),e.o(t)}}(g.$$.fragment,e),m=!1},d(e){e&&a(t),j(g)}}}function R(e,t,n){let r=null,o=new Worker("./worker/geodeWW.js");o.onmessage=function(e){n(0,r=e.data)};return[r,e=>{o.postMessage(e),n(0,r=null)}]}return new class extends M{constructor(e){super(),L(this,e,R,Q,l,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
