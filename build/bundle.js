var app=function(){"use strict";function e(){}function t(e){return e()}function n(){return Object.create(null)}function r(e){e.forEach(t)}function o(e){return"function"==typeof e}function s(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function l(e,t,n,r){return e[1]&&r?function(e,t){for(const n in t)e[n]=t[n];return e}(n.ctx.slice(),e[1](r(t))):n.ctx}function c(e,t){e.appendChild(t)}function i(e,t,n){e.insertBefore(t,n||null)}function a(e){e.parentNode.removeChild(e)}function u(e){return document.createElement(e)}function f(e){return document.createTextNode(e)}function d(){return f(" ")}function p(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function m(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function g(e,t){t=""+t,e.data!==t&&(e.data=t)}function h(e,t,n,r){e.style.setProperty(t,n,r?"important":"")}let x;function $(e){x=e}const y=[],b=[],v=[],w=[],M=Promise.resolve();let k=!1;function T(e){v.push(e)}let _=!1;const j=new Set;function F(){if(!_){_=!0;do{for(let e=0;e<y.length;e+=1){const t=y[e];$(t),S(t.$$)}for(y.length=0;b.length;)b.pop()();for(let e=0;e<v.length;e+=1){const t=v[e];j.has(t)||(j.add(t),t())}v.length=0}while(y.length);for(;w.length;)w.pop()();k=!1,_=!1,j.clear()}}function S(e){if(null!==e.fragment){e.update(),r(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(T)}}const L=new Set;let E;function C(){E={r:0,c:[],p:E}}function P(){E.r||r(E.c),E=E.p}function H(e,t){e&&e.i&&(L.delete(e),e.i(t))}function N(e,t,n,r){if(e&&e.o){if(L.has(e))return;L.add(e),E.c.push(()=>{L.delete(e),r&&(n&&e.d(1),r())}),e.o(t)}}function A(e){e&&e.c()}function D(e,n,s){const{fragment:l,on_mount:c,on_destroy:i,after_update:a}=e.$$;l&&l.m(n,s),T(()=>{const n=c.map(t).filter(o);i?i.push(...n):r(n),e.$$.on_mount=[]}),a.forEach(T)}function I(e,t){const n=e.$$;null!==n.fragment&&(r(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function B(e,t){-1===e.$$.dirty[0]&&(y.push(e),k||(k=!0,M.then(F)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function W(t,o,s,l,c,i,u=[-1]){const f=x;$(t);const d=o.props||{},p=t.$$={fragment:null,ctx:null,props:i,update:e,not_equal:c,bound:n(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(f?f.$$.context:[]),callbacks:n(),dirty:u};let m=!1;if(p.ctx=s?s(t,d,(e,n,...r)=>{const o=r.length?r[0]:n;return p.ctx&&c(p.ctx[e],p.ctx[e]=o)&&(p.bound[e]&&p.bound[e](o),m&&B(t,e)),n}):[],p.update(),m=!0,r(p.before_update),p.fragment=!!l&&l(p.ctx),o.target){if(o.hydrate){const e=function(e){return Array.from(e.childNodes)}(o.target);p.fragment&&p.fragment.l(e),e.forEach(a)}else p.fragment&&p.fragment.c();o.intro&&H(t.$$.fragment),D(t,o.target,o.anchor),F()}$(f)}class G{$destroy(){I(this,1),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(){}}const O=e=>({}),q=e=>({});function z(t){let n,r;return{c(){n=u("p"),r=f(t[5]),m(n,"class","mt-4")},m(e,t){i(e,n,t),c(n,r)},p(e,t){32&t&&g(r,e[5])},i:e,o:e,d(e){e&&a(n)}}}function J(e){let t,n,r,o,s;const h=e[17].success,x=function(e,t,n,r){if(e){const o=l(e,t,n,r);return e[0](o)}}(h,e,e[16],q);return{c(){x&&x.c(),t=d(),n=u("div"),r=f(e[5]),m(n,"class","absolute left-0 bottom-0 w-full h-12 text-sm bg-gray-300 leading-4 flex items-center justify-center px-8 p-y select-none")},m(l,a,u){x&&x.m(l,a),i(l,t,a),i(l,n,a),c(n,r),o=!0,u&&s(),s=p(n,"click",e[18])},p(e,t){x&&x.p&&65536&t&&x.p(l(h,e,e[16],q),function(e,t,n,r){if(e[2]&&r){const o=e[2](r(n));if(void 0===t.dirty)return o;if("object"==typeof o){const e=[],n=Math.max(t.dirty.length,o.length);for(let r=0;r<n;r+=1)e[r]=t.dirty[r]|o[r];return e}return t.dirty|o}return t.dirty}(h,e[16],t,O)),(!o||32&t)&&g(r,e[5])},i(e){o||(H(x,e),o=!0)},o(e){N(x,e),o=!1},d(e){x&&x.d(e),e&&a(t),e&&a(n),s()}}}function K(t){let n,r,o,s,l,p;return{c(){n=u("p"),r=f("Error : "),o=f(t[0]),s=d(),l=u("p"),p=f(t[5]),m(l,"class","mt-4")},m(e,t){i(e,n,t),c(n,r),c(n,o),i(e,s,t),i(e,l,t),c(l,p)},p(e,t){1&t&&g(o,e[0]),32&t&&g(p,e[5])},i:e,o:e,d(e){e&&a(n),e&&a(s),e&&a(l)}}}function Q(t){let n;return{c(){n=u("p"),n.textContent="Let go to try and read the file!"},m(e,t){i(e,n,t)},p:e,i:e,o:e,d(e){e&&a(n)}}}function R(t){let n;return{c(){n=u("p"),n.textContent="Loading..."},m(e,t){i(e,n,t)},p:e,i:e,o:e,d(e){e&&a(n)}}}function U(e){let t,n,o,s,l,f,g,x,$,y,b;const v=[R,Q,K,J,z],w=[];function M(e,t){return e[1]?0:e[4]?1:e[0]?2:e[2]?3:4}return g=M(e),x=w[g]=v[g](e),{c(){t=u("div"),n=u("input"),o=d(),s=u("div"),l=u("div"),f=u("div"),x.c(),m(n,"id","hiddenFileInput"),m(n,"type","file"),m(n,"class","hidden"),m(n,"accept",e[3]),m(f,"class",$="p-2 sm:p-4 text-center w-full "+(e[2]?"pb-12":"")),h(f,"word-break","break-word"),m(l,"class","h-full flex flex-col justify-center items-center text-gray-600 font-light text-sm sm:text-base overflow-hidden relative"),m(s,"class",e[6]),m(t,"class","w-full h-full")},m(a,u,d){i(a,t,u),c(t,n),c(t,o),c(t,s),c(s,l),c(l,f),w[g].m(f,null),y=!0,d&&r(b),b=[p(n,"change",e[12]),p(s,"dragenter",e[7]),p(s,"dragover",e[8]),p(s,"dragleave",e[9]),p(s,"drop",e[10]),p(s,"click",e[19])]},p(e,[t]){(!y||8&t)&&m(n,"accept",e[3]);let r=g;g=M(e),g===r?w[g].p(e,t):(C(),N(w[r],1,1,()=>{w[r]=null}),P(),x=w[g],x||(x=w[g]=v[g](e),x.c()),H(x,1),x.m(f,null)),(!y||4&t&&$!==($="p-2 sm:p-4 text-center w-full "+(e[2]?"pb-12":"")))&&m(f,"class",$),(!y||64&t)&&m(s,"class",e[6])},i(e){y||(H(x),y=!0)},o(e){N(x),y=!1},d(e){e&&a(t),w[g].d(),r(b)}}}function V(e,t,n){let{loading:r=!1}=t,{errorMessage:o=null}=t,{success:s=!1}=t,{onFileSelected:l=null}=t,{allowedType:c="image/tiff"}=t,i=!1,a="",u="ontouchstart"in window||navigator.MaxTouchPoints>0||navigator.msMaxTouchPoints>0;const f=e=>{e.preventDefault(),e.stopPropagation()},d=e=>{r||document.getElementById("hiddenFileInput").click()};let p=null,{$$slots:m={},$$scope:g}=t;return e.$set=e=>{"loading"in e&&n(1,r=e.loading),"errorMessage"in e&&n(0,o=e.errorMessage),"success"in e&&n(2,s=e.success),"onFileSelected"in e&&n(13,l=e.onFileSelected),"allowedType"in e&&n(3,c=e.allowedType),"$$scope"in e&&n(16,g=e.$$scope)},e.$$.update=()=>{if(4&e.$$.dirty){const e=`Click here to browse for ${s?"another":"a"} file on your device`,t=`Drag ${s?"another":"a"} file in or click here to browse`;n(5,a=u?e:t)}85&e.$$.dirty&&(n(6,p="w-full h-full bg-gray-200 rounded-lg cursor-pointer"),o?n(6,p+=" border-dashed border-4 border-red-500"):i?n(6,p+=" border-dashed border-4 border-green-500"):s&&n(6,p+=" border-4 border-green-400"))},[o,r,s,c,i,a,p,e=>{f(e),r||n(4,i=!0)},e=>{f(e),r||n(4,i=!0)},e=>{f(e),r||n(4,i=!1)},e=>{f(e),r||(n(4,i=!1),e.dataTransfer.files[0].type==c?l&&l(e.dataTransfer.files[0]):(n(0,o="File was not a tiff :("),file=null))},d,e=>{f(e),e.target.files.length&&l&&l(e.target.files[0])},l,u,f,g,m,e=>{s&&d()},e=>{s||d()}]}class X extends G{constructor(e){super(),W(this,e,V,U,s,{loading:1,errorMessage:0,success:2,onFileSelected:13,allowedType:3})}}function Y(t){let n;return{c(){n=u("footer"),n.innerHTML='<p class="italic">No information on your files is uploaded, and all processing happens on your own machine.</p> \n    <div class="pt-4">\n        Created by\n        <a href="https://mattbrealey.com/" target="_blank" rel="noopener noreferrer" class="text-green-500 hover:text-green-600 hover:underline">Matt Brealey</a>.\n        Find out\n        <a href="https://mattbrealey.com/projects/geode" target="_blank" rel="noopener noreferrer" class="text-green-500 hover:text-green-600 hover:underline">more here</a> \n        üëç\n    </div>',m(n,"class","text-center text-xs text-gray-500 px-4 pb-4")},m(e,t){i(e,n,t)},p:e,i:e,o:e,d(e){e&&a(n)}}}class Z extends G{constructor(e){super(),W(this,e,null,Y,s,{})}}function ee(e){let t,n,r,o,s=e[0][e[1]]+"",l=e[0].length>1&&te(e),c=e[0].length>1&&ne(e);return{c(){l&&l.c(),t=d(),n=u("div"),r=d(),c&&c.c(),o=f(""),m(n,"class","w-64 h-48 pb-2")},m(e,a){l&&l.m(e,a),i(e,t,a),i(e,n,a),n.innerHTML=s,i(e,r,a),c&&c.m(e,a),i(e,o,a)},p(e,r){e[0].length>1?l?l.p(e,r):(l=te(e),l.c(),l.m(t.parentNode,t)):l&&(l.d(1),l=null),3&r&&s!==(s=e[0][e[1]]+"")&&(n.innerHTML=s),e[0].length>1?c?c.p(e,r):(c=ne(e),c.c(),c.m(o.parentNode,o)):c&&(c.d(1),c=null)},d(e){l&&l.d(e),e&&a(t),e&&a(n),e&&a(r),c&&c.d(e),e&&a(o)}}}function te(e){let t,n,r,o;return{c(){t=u("div"),n=u("span"),n.textContent="‚Æï",m(t,"class",r="w-10 h-10 flex justify-end items-center select-none "+(0===e[1]?" opacity-25 pointer-events-none":"")),h(t,"transform","rotate(180deg)")},m(r,s,l){i(r,t,s),c(t,n),l&&o(),o=p(t,"click",e[3])},p(e,n){2&n&&r!==(r="w-10 h-10 flex justify-end items-center select-none "+(0===e[1]?" opacity-25 pointer-events-none":""))&&m(t,"class",r)},d(e){e&&a(t),o()}}}function ne(e){let t,n,r,o;return{c(){t=u("div"),n=u("span"),n.textContent="‚Æï",m(t,"class",r="w-10 h-10 flex justify-end items-center select-none "+(e[1]===e[0].length-1?" opacity-25 pointer-events-none":""))},m(r,s,l){i(r,t,s),c(t,n),l&&o(),o=p(t,"click",e[2])},p(e,n){3&n&&r!==(r="w-10 h-10 flex justify-end items-center select-none "+(e[1]===e[0].length-1?" opacity-25 pointer-events-none":""))&&m(t,"class",r)},d(e){e&&a(t),o()}}}function re(t){let n,r=t[0]&&t[0].length&&ee(t);return{c(){n=u("div"),r&&r.c(),m(n,"class","mt-2 sm:mt-6 flex justify-center items-center")},m(e,t){i(e,n,t),r&&r.m(n,null)},p(e,[t]){e[0]&&e[0].length?r?r.p(e,t):(r=ee(e),r.c(),r.m(n,null)):r&&(r.d(1),r=null)},i:e,o:e,d(e){e&&a(n),r&&r.d()}}}function oe(e,t,n){let{summaries:r}=t,o=0;return e.$set=e=>{"summaries"in e&&n(0,r=e.summaries)},[r,o,e=>{e.preventDefault(),e.stopPropagation(),n(1,o+=1)},e=>{e.preventDefault(),e.stopPropagation(),n(1,o-=1)}]}class se extends G{constructor(e){super(),W(this,e,oe,re,s,{summaries:0})}}function le(e){let t,n,r,o=e[1].fileSummary+"";const s=new se({props:{summaries:e[1].ifdSummaries}});return{c(){t=u("p"),n=d(),A(s.$$.fragment),m(t,"class","text-xs sm:text-sm")},m(e,l){i(e,t,l),t.innerHTML=o,i(e,n,l),D(s,e,l),r=!0},p(e,n){(!r||2&n)&&o!==(o=e[1].fileSummary+"")&&(t.innerHTML=o);const l={};2&n&&(l.summaries=e[1].ifdSummaries),s.$set(l)},i(e){r||(H(s.$$.fragment,e),r=!0)},o(e){N(s.$$.fragment,e),r=!1},d(e){e&&a(t),e&&a(n),I(s,e)}}}function ce(e){let t,n,r=e[1]&&le(e);return{c(){t=u("span"),r&&r.c(),m(t,"slot","success")},m(e,o){i(e,t,o),r&&r.m(t,null),n=!0},p(e,n){e[1]?r?(r.p(e,n),H(r,1)):(r=le(e),r.c(),H(r,1),r.m(t,null)):r&&(C(),N(r,1,1,()=>{r=null}),P())},i(e){n||(H(r),n=!0)},o(e){N(r),n=!1},d(e){e&&a(t),r&&r.d()}}}function ie(e){let t,n,r,o,s,l,f;const p=new X({props:{loading:e[0],success:!e[0]&&e[1]&&!e[2],errorMessage:e[2],onFileSelected:e[3],$$slots:{success:[ce]},$$scope:{ctx:e}}}),g=new Z({});return{c(){t=u("main"),n=u("div"),r=u("div"),r.innerHTML='<h1 id="geodeTitle" class="flex-1 text-green-500 text-4xl sm:text-5xl">Geode</h1> \n\t\t\t<h2 class="text-sm text-gray-600 font-light sm:w-5/12 lg:w-3/12 sm:text-base sm:text-base sm:text-right">\n\t\t\t\tA work-in-progress, (soon-to-be) hopefully really very helpful GeoTIFF preview tool üëç\n\t\t\t</h2>',o=d(),s=u("div"),A(p.$$.fragment),l=d(),A(g.$$.fragment),m(r,"class","flex flex-col sm:flex-row justify-center pt-4 mx-6 sm:items-center"),m(s,"class","w-full flex-1 px-6 py-4 overflow-hidden"),m(n,"class","container mx-auto flex flex-col h-full"),m(t,"class","w-full h-full")},m(e,a){i(e,t,a),c(t,n),c(n,r),c(n,o),c(n,s),D(p,s,null),c(n,l),D(g,n,null),f=!0},p(e,[t]){const n={};1&t&&(n.loading=e[0]),7&t&&(n.success=!e[0]&&e[1]&&!e[2]),4&t&&(n.errorMessage=e[2]),34&t&&(n.$$scope={dirty:t,ctx:e}),p.$set(n)},i(e){f||(H(p.$$.fragment,e),H(g.$$.fragment,e),f=!0)},o(e){N(p.$$.fragment,e),N(g.$$.fragment,e),f=!1},d(e){e&&a(t),I(p),I(g)}}}function ae(e,t,n){let r=!1,o=null,s=null;const l=new Worker("./worker/geodeWW.js");l.onmessage=function(e){const t=e.data;!t||t.error?n(2,s=t.error):n(1,o=t.data),n(0,r=!1)};return[r,o,s,e=>{l.postMessage(e),n(1,o=null),n(2,s=null),n(0,r=!0)}]}return new class extends G{constructor(e){super(),W(this,e,ae,ie,s,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
